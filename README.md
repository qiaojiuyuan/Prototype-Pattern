# Prototype-Pattern
## 原型模式
### 项目类图
![项目类图](https://github.com/qiaojiuyuan/Prototype-Pattern/raw/master/project_class.png)
### 定义
```
用原型实例指定创建对象的各类，并且通过拷贝这些原型创建新的对象。
Cloneable是一个空接口，只是一个标记作用，在JVM中具有这个标记的对象才可能被拷贝。
```
### 优点
* 性能优良
```
原型模式是在内存二进制流的拷贝，要比直接new一个对象性能好很多，特别是要在一个循环体内产生大量的对象时，
原型模式可以更好地体现其优点。
```
* 逃避构造函数的约束
```
调用clone方法不会调用对象的构造函数
```
### 使用场景
* 资源优化场景
* 性能和安全要求的场景
* 一个对象多个修改者的场景
### 深拷贝和浅拷贝
```
Object类提供的方法clone只是拷贝本对象，其对象内部的数组、引用对象等都不拷贝，还是指向原生对象的
内部元素地址，这种叫浅拷贝。
String不会有浅拷贝问题。
要想让引用对象等实现深拷贝，可以在clone方法里调用当前对象里的引用对象的clone方法，对其引用进行赋值
如：arrayList = (ArrayList<String>)this.arrayList.clone();
```
### 注意
```
使用原型模式时，引用的成员变量必须满足两个条件才不会被拷贝:
一是类的成员变量，而不是方法内变量。
二是必须是一个可变的引用对象，而不是一个原始类型或不可变对象。
```
### clone与final
```
对象的clone与对象内的final关键字是有冲突的。final修饰的引用变量是无法clone的。
```
